# NBAå¤§å°åˆ†é¢„æµ‹ç³»ç»Ÿ - æž¶æž„è®¾è®¡

## ç³»ç»Ÿæž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å±‚ (Data Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NBA API â†’ fetch_data.py â†’ data/raw/                   â”‚
â”‚     â†“                                                    â”‚
â”‚  æ•°æ®æ¸…æ´— â†’ build_features.py â†’ data/processed/         â”‚
â”‚     â†“                                                    â”‚
â”‚  ç‰¹å¾å·¥ç¨‹ â†’ feature_store â†’ data/features/              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å»ºæ¨¡å±‚ (Model Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è®­ç»ƒ: train_model.py                                    â”‚
â”‚    - è§„åˆ™ç­–ç•¥ (Rule-based)                              â”‚
â”‚    - MLæ¨¡åž‹ (XGBoost/LightGBM)                          â”‚
â”‚    - é›†æˆæ¨¡åž‹ (Ensemble)                                â”‚
â”‚  è¾“å‡º: models/model_{version}.pkl                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  é¢„æµ‹å±‚ (Prediction Layer)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®žæ—¶é¢„æµ‹: predict.py                                    â”‚
â”‚    - èŽ·å–ä»Šæ—¥èµ›ç¨‹                                        â”‚
â”‚    - ç”Ÿæˆç‰¹å¾                                           â”‚
â”‚    - æ¨¡åž‹æŽ¨ç†                                           â”‚
â”‚  è¾“å‡º: é¢„æµ‹ç»“æžœ + ç½®ä¿¡åº¦ + å»ºè®®ä¸‹æ³¨é‡‘é¢                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å›žæµ‹å±‚ (Backtest Layer)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›žæµ‹: backtest.py                                       â”‚
â”‚    - æ¨¡æ‹ŸåŽ†å²é¢„æµ‹                                        â”‚
â”‚    - è®¡ç®—ç›ˆåˆ©æ›²çº¿                                        â”‚
â”‚    - é£Žé™©è¯„ä¼°                                           â”‚
â”‚  è¾“å‡º: æŠ¥å‘Š + å¯è§†åŒ–                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç‰¹å¾è®¾è®¡

### 1. çƒé˜Ÿæ”»é˜²æŒ‡æ ‡
```python
features = {
    'team_offensive_rating': float,  # æ”»å‡»æ•ˆçŽ‡
    'team_defensive_rating': float,  # é˜²å®ˆæ•ˆçŽ‡
    'team_pace': float,              # æ¯”èµ›èŠ‚å¥
    'team_avg_pts_last_5': float,    # è¿‘5åœºåœºå‡å¾—åˆ†
    'team_avg_pts_last_10': float,   # è¿‘10åœºåœºå‡å¾—åˆ†
}
```

### 2. å¯¹é˜µç‰¹å¾
```python
features = {
    'matchup_avg_total': float,      # åŽ†å²äº¤æ‰‹åœºå‡æ€»åˆ†
    'pace_sum': float,               # åŒæ–¹èŠ‚å¥ä¹‹å’Œ
    'offensive_vs_defensive': float, # çŸ›ç›¾å¯¹å†³æŒ‡æ ‡
}
```

### 3. çŽ¯å¢ƒç‰¹å¾
```python
features = {
    'is_home': bool,                # ä¸»åœºä¼˜åŠ¿
    'rest_days': int,               # ä¼‘æ¯å¤©æ•°
    'is_back_to_back': bool,        # èƒŒé èƒŒ
}
```

## æ¨¡åž‹é€‰æ‹©

### æ–¹æ¡ˆ1: è§„åˆ™ç­–ç•¥ï¼ˆbaselineï¼‰

```python
def predict_over(team_a, team_b):
    pace_threshold = 100
    defense_threshold = 110
    
    if (team_a.pace + team_b.pace) > pace_threshold * 2:
        if team_a.def_rating > defense_threshold and team_b.def_rating > defense_threshold:
            return 'OVER'
    return 'UNDER'
```

**ä¼˜ç‚¹**: ç®€å•ã€å¯è§£é‡Šã€å¿«é€ŸéªŒè¯
**ç›®æ ‡å‡†ç¡®çŽ‡**: 52-55%

### æ–¹æ¡ˆ2: XGBoostï¼ˆä¸»åŠ›ï¼‰

```python
from xgboost import XGBRegressor

model = XGBRegressor(
    n_estimators=500,
    learning_rate=0.05,
    max_depth=6,
    objective='reg:squarederror'
)
```

**ä¼˜ç‚¹**: å‡†ç¡®çŽ‡é«˜ã€ç‰¹å¾é‡è¦æ€§åˆ†æž
**ç›®æ ‡å‡†ç¡®çŽ‡**: 55-60%

### æ–¹æ¡ˆ3: é›†æˆæ¨¡åž‹ï¼ˆä¼˜åŒ–ï¼‰

```python
ensemble = VotingRegressor([
    ('xgb', xgb_model),
    ('lgb', lightgbm_model),
    ('rule', rule_model)
])
```

**ä¼˜ç‚¹**: é²æ£’æ€§å¼º
**ç›®æ ‡å‡†ç¡®çŽ‡**: 60%+

## è¯„ä¼°æŒ‡æ ‡

1. **å‡†ç¡®çŽ‡** (Accuracy): > 55%
2. **ROI** (æŠ•èµ„å›žæŠ¥çŽ‡): > 5%
3. **æœ€å¤§å›žæ’¤** (Max Drawdown): < 20%
4. **å‡¯åˆ©å‡†åˆ™** (Kelly Criterion): åŠ¨æ€ä»“ä½

## é£ŽæŽ§ç­–ç•¥

```python
# å‡¯åˆ©å…¬å¼
kelly = (win_prob * (odds - 1) - (1 - win_prob)) / (odds - 1)

# ä¿å®ˆè°ƒæ•´
bet_size = min(
    bankroll * kelly * 0.25,  # 1/4å‡¯åˆ©
    bankroll * 0.05           # æœ€å¤š5%
)
```

## æ•°æ®æµ

```
NBA API
  â†“
fetch_data.py (æ¯æ—¥æ›´æ–°)
  â†“
data/raw/games_2024-25.csv
  â†“
build_features.py (ç‰¹å¾å·¥ç¨‹)
  â†“
data/features/features.parquet
  â†“
train_model.py (è®­ç»ƒ/æ›´æ–°æ¨¡åž‹)
  â†“
models/xgb_v1.pkl
  â†“
predict.py (å®žæ—¶é¢„æµ‹)
  â†“
ä»Šæ—¥é¢„æµ‹ç»“æžœ.json
```

## æœªæ¥æ‰©å±•

- [ ] çƒå‘˜çº§åˆ«åˆ†æžï¼ˆä¼¤ç—…å½±å“ï¼‰
- [ ] å®žæ—¶ç›˜å£ç›‘æŽ§
- [ ] Telegramé€šçŸ¥
- [ ] Webç•Œé¢å±•ç¤º
- [ ] è‡ªåŠ¨ä¸‹æ³¨æŽ¥å£ï¼ˆè°¨æ…Žï¼ï¼‰

---

**ç‰ˆæœ¬**: v0.1  
**æ›´æ–°**: 2026-02-22  
**ä½œè€…**: æ·¼æ·¼ ðŸŒŠ
