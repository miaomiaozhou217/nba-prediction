# NBA大小分预测系统 V3 - 快速开始 🏀

**伤病增强版** - 准确率73.5%, ROI +40.3%

---

## 🚀 每日使用流程

### 1. 更新伤病数据（每天比赛前）

```bash
cd ~/projects/nba
python3 scripts/fetch_injuries.py
```

输出示例：
```
✅ 获取到 81 条伤病记录
🚨 确定缺阵球员 (68 人):
   BOS   - Jayson Tatum (Out - Achilles)
   OKC   - Shai Gilgeous-Alexander (Out - Knee)
   ...
```

---

### 2. 预测今晚比赛

```bash
# 基本用法
python3 scripts/predict_v3.py --home LAL --away GS

# 完整示例
python3 scripts/predict_v3.py --home BOS --away MIA
```

**输出解读：**

```
🏥 伤病影响评估:
   BOS: Jayson Tatum(28.0PPG) → 影响-5.6分
   
📊 基础统计:
   主队近5场均分: 109.2
   客队近5场均分: 126.0
   组合预期: 235.2
   伤病总影响: -5.6分

🎯 预测总分: 227.9

💰 下注建议:
   盘口215: OVER (🏆 强烈推荐, 信心度6.0%)
   盘口220: OVER (⚠️ 可考虑, 信心度3.6%)
```

---

## 📊 球队缩写对照表

| 东部 | 缩写 | 西部 | 缩写 |
|------|------|------|------|
| 波士顿凯尔特人 | BOS | 俄克拉荷马雷霆 | OKC |
| 密尔沃基雄鹿 | MIL | 丹佛掘金 | DEN |
| 费城76人 | PHI | 洛杉矶湖人 | LAL |
| 纽约尼克斯 | NY | 金州勇士 | GS |
| 克利夫兰骑士 | CLE | 明尼苏达森林狼 | MIN |
| 奥兰多魔术 | ORL | 菲尼克斯太阳 | PHX |
| 印第安纳步行者 | IND | 达拉斯独行侠 | DAL |
| 迈阿密热火 | MIA | 洛杉矶快船 | LAC |
| 亚特兰大老鹰 | ATL | 萨克拉门托国王 | SAC |
| 布鲁克林篮网 | BKN | 休斯顿火箭 | HOU |
| 芝加哥公牛 | CHI | 孟菲斯灰熊 | MEM |
| 夏洛特黄蜂 | CHA | 新奥尔良鹈鹕 | NO |
| 多伦多猛龙 | TOR | 波特兰开拓者 | POR |
| 底特律活塞 | DET | 圣安东尼奥马刺 | SA |
| 华盛顿奇才 | WSH | 犹他爵士 | UTAH |

---

## 🎯 下注决策指南

### 信心度解读

| 信心度 | 决策 | 说明 |
|--------|------|------|
| > 5% | 🏆 **强烈推荐** | 模型高度确信，建议下注 |
| 3-5% | 💰 **建议下注** | 中等信心，可考虑 |
| 2-3% | ⚠️ **可考虑** | 低信心，谨慎决策 |
| < 2% | ❌ **不建议** | 信心不足，不要下注 |

### 盘口选择

**V3模型表现（回测113场）：**

| 盘口 | 准确率 | ROI | 推荐度 |
|------|--------|-----|--------|
| **215** | **73.5%** | **+40.3%** | 🏆🏆🏆🏆🏆 |
| 220 | 62.8% | +20.0% | ⭐⭐⭐ |
| 225 | 50.4% | -3.7% | ❌ |
| 230 | 46.9% | -10.4% | ❌ |

**建议：**
- ✅ **专注盘口215** - 准确率最高，ROI最佳
- ⚠️ 盘口220可作为备选
- ❌ 避免盘口225/230

---

## 💰 资金管理

### 凯利准则（简化版）

```
下注比例 = (准确率 × 赔率 - 1) / (赔率 - 1)

盘口215准确率73.5%, 赔率1.91:
下注比例 = (0.735 × 1.91 - 1) / (1.91 - 1)
         = 0.404 / 0.91
         = 44.4%
```

**实战建议：**
- 单场下注 ≤ 资金池**5%**（凯利准则的1/8）
- 单日累计 ≤ 资金池**15%**
- 连续亏损>3场，暂停1天

### 示例（资金池$1000）

| 信心度 | 下注金额 | 说明 |
|--------|---------|------|
| > 6% | $50 | 最大单场（5%） |
| 3-6% | $30 | 中等投入（3%） |
| 2-3% | $10-20 | 试探性（1-2%） |
| < 2% | $0 | 不下注 |

---

## 🏥 伤病影响解读

### 重度影响（> 8分）

```
例: OKC vs DAL
   OKC: SGA(31.0) + Jalen Williams(20.0) → -10.2分
   DAL: Kyrie Irving(25.0) → -5.0分
   总影响: -15.2分
```

**策略：**
- 总分预测会显著下调
- 倾向于UNDER
- **但注意**：滑动均分可能已包含近期伤病影响

### 轻度影响（< 5分）

```
例: BOS vs MIA
   BOS: Jayson Tatum(28.0) → -5.6分
   MIA: 无缺阵
   总影响: -5.6分
```

**策略：**
- 影响相对可控
- 仍需结合其他指标判断

---

## ⚠️ 注意事项

### 数据时效性

1. **伤病数据每天更新**
   ```bash
   # 比赛前2小时运行
   python3 scripts/fetch_injuries.py
   ```

2. **突发伤病**
   - Basketball Reference更新有延迟
   - 建议同时查看官方Twitter
   - 赛前1小时确认首发名单

### 模型局限性

1. **R² = -0.179**
   - 拟合度差（负数）
   - NBA总分本身随机性高

2. **未考虑因素**
   - ❌ 裁判风格
   - ❌ 背靠背疲劳
   - ❌ 球队化学反应
   - ❌ 垃圾时间影响

3. **历史数据依赖**
   - 新秀/交易球员统计不准
   - 赛季初期数据不足

---

## 🔧 高级功能

### 重新训练模型（每周）

```bash
# 获取最新数据
python3 scripts/fetch_espn_data.py
python3 scripts/clean_espn_data.py

# 更新伤病
python3 scripts/fetch_injuries.py

# 重新训练
python3 scripts/build_features_v3.py
python3 scripts/train_model_v3.py
```

### 手动调整球员数据

编辑 `data/player_stats.json`:

```json
{
  "LeBron James": {
    "team": "LAL",
    "ppg": 25.0  // 手动修改场均得分
  }
}
```

---

## 📈 真实案例

### 案例1: 高信心OVER

```bash
$ python3 scripts/predict_v3.py --home OKC --away DAL

🎯 预测总分: 236.0
💰 盘口215: OVER (🏆 强烈推荐, 信心度9.8%)

分析:
- 组合预期226.6
- 伤病影响-15.2
- 模型仍预测236.0（说明两队替补强）
- 信心度9.8%，强烈建议OVER 215
```

### 案例2: 伤病压低总分

```bash
$ python3 scripts/predict_v3.py --home BOS --away MIA

🎯 预测总分: 227.9
💰 盘口230: UNDER (可考虑, 信心度0.9%)

分析:
- BOS缺Tatum -5.6分
- 组合预期235.2
- 预测下调至227.9
- 但信心度仅0.9%，不建议下注
```

---

## 🆘 常见问题

**Q: 模型为什么预测和组合预期差这么多？**
A: 模型会综合考虑18+2个特征，不只是简单相加。防守、稳定性、主客场都会影响。

**Q: 伤病影响是累加还是覆盖？**
A: 简化版（方案1）是累加。专业版（方案2）会考虑替补质量。

**Q: 准确率73.5%可信吗？**
A: 基于113场测试集。实战需验证至少50-100场。建议先paper trading。

**Q: 为什么有时候伤病很重但预测总分还高？**
A: 可能是滑动均分已反映伤病（球员缺阵多天），模型避免双重计算。

---

## 📞 支持

**文档:**
- 完整说明: `README_V2.md`
- 伤病方案: `INJURY_FEATURE_PLAN.md`
- 项目状态: `PROJECT_STATUS.md`

**作者:** 细菌 + 淼淼 🌊  
**版本:** V3.0  
**创建:** 2026-02-22

---

**Good luck! 🍀 记住：永远不要赌超过你能承受的损失。**
